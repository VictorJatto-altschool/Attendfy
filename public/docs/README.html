<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Attendify – Project Documentation</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
  <style>
    :root { --ink:#102a43; --muted:#627d98; --brand:#2e7d32; }
    * { box-sizing: border-box; }
    body { font-family: Montserrat, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0 auto; padding: 2.5rem 1.25rem; max-width: 980px; color: var(--ink); line-height: 1.6; }
    h1, h2, h3 { line-height: 1.25; }
    h1 { font-size: 2rem; margin: 0 0 0.25rem; }
    h2 { font-size: 1.35rem; margin: 2rem 0 0.5rem; }
    h3 { font-size: 1.05rem; margin: 1.25rem 0 0.25rem; }
    p { margin: 0.25rem 0 0.75rem; color: var(--ink); }
    .sub { color: var(--muted); font-size: .95rem; }
    .muted { color: var(--muted); }
    .pill { display: inline-block; padding: .25rem .5rem; border-radius: 999px; background: #e6f4ea; color: var(--brand); font-weight: 600; font-size: .85rem; }
    .hero { display: flex; align-items: center; gap: .75rem; margin-bottom: 1.25rem; }
    .hero i { color: var(--brand); font-size: 1.35rem; }
    .kbd { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; background: #f6f8fa; border: 1px solid #e1e4e8; padding: .15rem .35rem; border-radius: 6px; font-size: .85em; }
    ul { margin-top: .25rem; }
    code { background: #f6f8fa; padding: .1rem .25rem; border-radius: 4px; }
    .grid { display: grid; grid-template-columns: 1fr; gap: 1rem; }
    @media (min-width: 800px) { .grid { grid-template-columns: 1fr 1fr; } }

    /* Print-friendly */
    @media print { 
      body { padding: 0; }
      a[href]:after { content: ""; }
      .actions { display: none; }
      .page-break { page-break-before: always; }
    }
    .actions { margin: 1rem 0 2rem; display: flex; gap: .5rem; }
    .btn { border: 0; padding: .6rem .9rem; border-radius: 10px; cursor: pointer; font-weight: 600; }
    .btn-primary { background: #2e7d32; color: #fff; }
    .btn-outline { background: #fff; color: #2e7d32; border: 2px solid #2e7d32; }
  </style>
</head>
<body>
  <div class="hero">
    <i class="bi bi-mortarboard-fill"></i>
    <div>
      <h1>Attendify</h1>
      <div class="sub">GPS‑based attendance that works offline, with course rep controls and optional cloud sync.</div>
    </div>
    <span class="pill" style="margin-left:auto;">Product Brief</span>
  </div>

  <div class="actions">
    <button class="btn btn-primary" onclick="window.print()"><i class="bi bi-printer"></i> Print / Save as PDF</button>
    <a class="btn btn-outline" href="../index.html" target="_blank"><i class="bi bi-box-arrow-up-right"></i> Open App</a>
  </div>

  <h2>1) Elevator pitch</h2>
  <p>Attendify is a lightweight, offline-first, GPS-gated attendance system for universities and training programs. It prevents proxy attendance, works without internet, and gives course reps simple tools to manage timetables and summaries—syncing to the cloud when online.</p>

  <h2>2) The problem</h2>
  <ul>
    <li>Manual attendance is slow, error-prone, and easily gamed.</li>
    <li>Existing tools rely on fragile QR/Wi‑Fi flows and break offline.</li>
    <li>Reps lack an easy way to manage time slots across departments/levels.</li>
  </ul>

  <h2>3) The solution</h2>
  <ul>
    <li>GPS gating + time windows + device binding to stop impersonation.</li>
    <li>Offline-first UX with a clear manual fallback and audit trail.</li>
    <li>Scoped rep access (faculty/department/level) with edit/delete.</li>
    <li>Optional Firestore sync for multi-device and backups.</li>
  </ul>

  <h2>4) Features</h2>
  <div class="grid">
    <div>
      <h3>Students</h3>
      <ul>
        <li>Check-in only near venue and during scheduled time.</li>
        <li>Device binding per day to deter proxy attendance.</li>
        <li>Offline support with manual write-in guidance.</li>
      </ul>
    </div>
    <div>
      <h3>Course Reps</h3>
      <ul>
        <li>PIN-secured access; browser password manager friendly.</li>
        <li>Set Rep Scope; create/edit/delete timetable inside scope.</li>
        <li>Daily attendance summaries, print/download.</li>
      </ul>
    </div>
  </div>

  <h2>5) Architecture</h2>
  <ul>
    <li>Frontend: HTML/CSS/JS, Bootstrap Icons, Montserrat.</li>
    <li>Storage: localStorage offline-first.</li>
    <li>Cloud (optional): Firebase Firestore compat SDK.</li>
    <li>Preloader: full-screen overlay with tips and timeout.</li>
  </ul>

  <h2>6) Data model</h2>
  <pre><code>attendanceApp/
  timetable: { items: [ { day, timeSlot, courseCode, venue, faculty, department, level, gpsLat, gpsLng, id } ] }
  attendance: { items: [ { studentName, matriculation, courseCode, timestamp, venue, faculty, department, level, gpsLocation?, distance?, status? } ] }
</code></pre>

  <h2>7) Offline/online & Firebase</h2>
  <ul>
    <li>Works fully offline; shows banners; syncs when back online.</li>
    <li>Enable Firebase by setting <code>window.firebaseConfig.enabled = true</code> in <code>index.html</code>.</li>
    <li>Use dev rules for testing; replace with restrictive prod rules.</li>
  </ul>

  <h2>8) Anti‑cheat & security</h2>
  <ul>
    <li>GPS geofence (~100m), time-window enforcement.</li>
    <li>Per-device daily student binding; rep unlock.</li>
    <li>Rep email whitelist + PIN; scope enforcement on all changes.</li>
  </ul>

  <div class="page-break"></div>
  <h2>9) Function reference (high level)</h2>
  <ul>
    <li><b>initializeApp</b>: Boot; cloud init; load UI; set listeners; mark ready.</li>
    <li><b>initPreloaderLifecycle</b>: Preloader tips; 25s min; hide on ready/timeout.</li>
    <li><b>todayKey / load/save/clearStudentProfile / applyStudentProfileLockUI</b>: Device binding per day.</li>
    <li><b>initCloud / loadFromCloudIfAny / subscribeCloud</b>: Firestore init, load/merge, live updates.</li>
    <li><b>initNetworkStatus</b>: Offline/online banners; best-effort write-through.</li>
    <li><b>setupEventListeners</b>: Wire forms, filters, GPS, rep login/scope save.</li>
    <li><b>getCurrentLocation (+ helpers)</b>: GPS acquire, accuracy hints, retries.</li>
    <li><b>handleStudentCheckin</b>: Validate → processAttendance → success UX.</li>
    <li><b>handleManualAttendance</b>: Offline/manual path with audit.</li>
    <li><b>verifyRepAccess / repSignOut</b>: Rep auth session; unlock button.</li>
    <li><b>handleTimetableSubmission</b>: Create entry (enforce scope).</li>
    <li><b>renderRepTimetableList</b>: Manage list with edit/save/cancel/delete.</li>
    <li><b>saveEdit / deleteTimetableEntry</b>: Update or remove, persist, sync.</li>
    <li><b>displayTimetable / filterTimetable</b>: Render and filter weekly view.</li>
    <li><b>generateSummary / downloadSummary / printSummary</b>: Daily reports.</li>
  </ul>

  <h2>10) Demo script (3–5 minutes)</h2>
  <ol>
    <li>Student flow: preloader → GPS lock → check-in → manual fallback demo.</li>
    <li>Rep flow: login + PIN → set scope → create/edit/delete timetable.</li>
    <li>Cloud: See Firestore updates; show summary; print/download.</li>
  </ol>

  <h2>11) Roadmap</h2>
  <ul>
    <li>Admin analytics, CSV import/export, SSO/RBAC.</li>
    <li>Optional secondary in-class factor (QR/short code), photo (policy-driven).</li>
    <li>Per-institution multi-tenant config and SLAs.</li>
  </ul>

  <h2>12) Contact</h2>
  <p class="muted">For verification and support, contact admin via WhatsApp.</p>
</body>
</html>
